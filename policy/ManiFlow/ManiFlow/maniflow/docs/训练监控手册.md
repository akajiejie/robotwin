# æœºå™¨äººå…·èº«æ™ºèƒ½æ¨¡å‹è®­ç»ƒå‚æ•°ç›‘æ§æ‰‹å†Œ

**ç‰ˆæœ¬**: v1.0  
**é€‚ç”¨æ¨¡å‹**: DiTXGateAttn (åŸºäºFlow Matching + Consistency Training)  
**ç›‘æ§å¹³å°**: WandB  
**ä½œè€…**: åŸºäºä»£ç è‡ªåŠ¨ç”Ÿæˆ

---

## ç›®å½•

1. [å¿«é€Ÿå‚è€ƒè¡¨](#1-å¿«é€Ÿå‚è€ƒè¡¨)
2. [æ”¶æ•›ç¨³å®šæ€§ç›‘æ§ (Loss Metrics)](#2-æ”¶æ•›ç¨³å®šæ€§ç›‘æ§-loss-metrics)
3. [é—¨æ§åŠ¨æ€ç›‘æ§ (Gate Statistics)](#3-é—¨æ§åŠ¨æ€ç›‘æ§-gate-statistics)
4. [æ³¨æ„åŠ›èšç„¦åº¦ç›‘æ§ (Attention Statistics)](#4-æ³¨æ„åŠ›èšç„¦åº¦ç›‘æ§-attention-statistics)
5. [æ¨¡æ€è´¡çŒ®åˆ†æ](#5-æ¨¡æ€è´¡çŒ®åˆ†æ)
6. [è®­ç»ƒé˜¶æ®µè¯Šæ–­æŒ‡å—](#6-è®­ç»ƒé˜¶æ®µè¯Šæ–­æŒ‡å—)
7. [å¼‚å¸¸æ¨¡å¼è¯†åˆ«](#7-å¼‚å¸¸æ¨¡å¼è¯†åˆ«)

---

## 1. å¿«é€Ÿå‚è€ƒè¡¨

### æ ¸å¿ƒç›‘æ§æŒ‡æ ‡é€ŸæŸ¥

| æŒ‡æ ‡ç±»åˆ« | å…³é”®å‚æ•° | ç†æƒ³è¶‹åŠ¿ | é¢„è­¦é˜ˆå€¼ | è®°å½•é¢‘ç‡ |
|---------|---------|---------|---------|---------|
| **æŸå¤±** | `loss_flow` | ç¨³å®šä¸‹é™ | >1.0 (100 epochå) | æ¯æ­¥ |
| **æŸå¤±** | `loss_ct` | ç¨³å®šä¸‹é™ | >0.5 (100 epochå) | æ¯æ­¥ |
| **é—¨æ§** | `gate/mean_activation` | 0.4-0.6 ç¨³å®š | <0.2 æˆ– >0.8 | æ¯æ­¥ |
| **é—¨æ§** | `gate/saturation_high_ratio` | <0.1 | >0.3 | æ¯æ­¥ |
| **æ³¨æ„åŠ›** | `attn/entropy` | 0.3-0.7 | >0.85 (è¿‡åº¦åˆ†æ•£) | æ¯500æ­¥ |
| **æ¨¡æ€** | `attn/modality_tactile` | é€æ­¥ä¸Šå‡è‡³0.15-0.3 | <0.05 (è¢«å¿½ç•¥) | æ¯500æ­¥ |

---

## 2. æ”¶æ•›ç¨³å®šæ€§ç›‘æ§ (Loss Metrics)

### 2.1 Flow Matching Loss (`loss_flow`)

**ä»£ç ä½ç½®**: `maniflow_image_policy.py:669-672`

```python
loss_flow = F.mse_loss(v_flow_pred, v_flow_target, reduction='none')
loss_flow = reduce(loss_flow, 'b ... -> b (...)', 'mean')
```

#### ğŸ“Š ç‰©ç†æ„ä¹‰
- **ä½œç”¨**: è¡¡é‡æ¨¡å‹é¢„æµ‹çš„**ç¬æ—¶é€Ÿåº¦åœº** (velocity field) ä¸çœŸå®æ•°æ®æµçš„åŒ¹é…åº¦
- **è®­ç»ƒæœºåˆ¶**: é‡‡æ ·æ—¶é—´æ­¥ $t \sim \text{Beta}(2, 5)$ï¼Œé¢„æµ‹ä»å™ªå£° $x_0$ åˆ°æ•°æ® $x_1$ çš„çº¿æ€§æ’å€¼è·¯å¾„ä¸Šçš„é€Ÿåº¦
- **æœŸæœ›è¡Œä¸º**: æ¨¡å‹å­¦ä¹ ä»éšæœºå™ªå£°å¹³æ»‘è¿‡æ¸¡åˆ°çœŸå®åŠ¨ä½œè½¨è¿¹çš„æµå½¢ç»“æ„

#### ğŸ¯ ç†æƒ³è¶‹åŠ¿
```
Epoch 0-50:    å¿«é€Ÿä¸‹é™ (1.5 â†’ 0.8)
Epoch 50-200:  ç¨³å®šä¸‹é™ (0.8 â†’ 0.3)
Epoch 200+:    æ”¶æ•›ç¨³å®š (0.2-0.3 æ³¢åŠ¨ Â±0.05)
```

#### âš ï¸ å¼‚å¸¸æ¨¡å¼
| ç°è±¡ | å¯èƒ½åŸå›  | æ’æŸ¥æ–¹å‘ |
|------|---------|---------|
| æŒç»­>1.0 (100 epochå) | å­¦ä¹ ç‡è¿‡é«˜/æ•°æ®å™ªå£°å¤§ | é™ä½LRï¼Œæ£€æŸ¥æ•°æ®å½’ä¸€åŒ– |
| éœ‡è¡å‰§çƒˆ (Â±0.2) | Batch sizeè¿‡å° | å¢åŠ batch sizeè‡³64+ |
| çªç„¶ä¸Šå‡ | æ¢¯åº¦çˆ†ç‚¸ | æ£€æŸ¥`max_grad_norm`é…ç½® |
| ä¸‹é™ååå¼¹ | EMAæƒé‡æœªåŒæ­¥ | éªŒè¯`ema.step()`è°ƒç”¨ |

---

### 2.2 Consistency Training Loss (`loss_ct`)

**ä»£ç ä½ç½®**: `maniflow_image_policy.py:675-679`

```python
loss_ct = F.mse_loss(v_ct_pred, v_ct_target, reduction='none')
loss_ct = reduce(loss_ct, 'b ... -> b (...)', 'mean')
```

#### ğŸ“Š ç‰©ç†æ„ä¹‰
- **ä½œç”¨**: å¼ºåˆ¶æ¨¡å‹åœ¨**ä¸åŒæ—¶é—´æ­¥ä¹‹é—´ä¿æŒä¸€è‡´æ€§**ï¼Œé€šè¿‡è‡ªè’¸é¦è®©å½“å‰æ­¥é¢„æµ‹ä¸EMAæ¨¡å‹çš„æœªæ¥æ­¥é¢„æµ‹å¯¹é½
- **è®­ç»ƒæœºåˆ¶**: 
  - å½“å‰æ—¶åˆ» $t$ é¢„æµ‹ç›®æ ‡ $x_1$
  - EMAæ¨¡å‹åœ¨ $t+\Delta t$ é¢„æµ‹ç›®æ ‡ $x_1'$
  - è¦æ±‚ $x_1 \approx x_1'$ï¼ˆä¸€è‡´æ€§çº¦æŸï¼‰
- **æœŸæœ›è¡Œä¸º**: æå‡æ¨¡å‹çš„å•æ­¥é‡‡æ ·è´¨é‡ï¼ˆæ¨ç†æ—¶åªéœ€1-2æ­¥å³å¯ç”Ÿæˆé«˜è´¨é‡åŠ¨ä½œï¼‰

#### ğŸ¯ ç†æƒ³è¶‹åŠ¿
```
Epoch 0-50:    ä¸loss_flowåŒæ­¥ä¸‹é™ (1.2 â†’ 0.6)
Epoch 50-200:  ç•¥æ…¢äºloss_flow (0.6 â†’ 0.25)
Epoch 200+:    æ”¶æ•›è‡³ 0.2-0.3
```

#### âš ï¸ å¼‚å¸¸æ¨¡å¼
| ç°è±¡ | å¯èƒ½åŸå›  | æ’æŸ¥æ–¹å‘ |
|------|---------|---------|
| `loss_ct >> loss_flow` | EMAæ›´æ–°å¤ªæ…¢ | æ£€æŸ¥`ema.power`å‚æ•°ï¼ˆå»ºè®®0.75ï¼‰ |
| `loss_ct` ä¸ä¸‹é™ | é‡‡æ ·ç­–ç•¥é—®é¢˜ | éªŒè¯`sample_t_mode_consistency="discrete"` |
| ä¸¤è€…å·®è·>0.3 | Batch ratioä¸åˆç† | è°ƒæ•´`flow_batch_ratio=0.75` |

---

### 2.3 é€Ÿåº¦é¢„æµ‹å¹…åº¦ (`v_flow_pred_magnitude`, `v_ct_pred_magnitude`)

**ä»£ç ä½ç½®**: `manifold_image_policy.py:644, 662`

```python
v_flow_pred_magnitude = torch.sqrt(torch.mean(v_flow_pred ** 2)).item()
```

#### ğŸ“Š ç‰©ç†æ„ä¹‰
- **ä½œç”¨**: ç›‘æ§é¢„æµ‹é€Ÿåº¦å‘é‡çš„**L2èŒƒæ•°**ï¼Œåæ˜ æ¨¡å‹å¯¹åŠ¨ä½œå˜åŒ–å‰§çƒˆç¨‹åº¦çš„ç†è§£
- **æ­£å¸¸èŒƒå›´**: 0.5-2.0ï¼ˆå–å†³äºåŠ¨ä½œç©ºé—´å½’ä¸€åŒ–æ–¹å¼ï¼‰

#### ğŸ¯ ç†æƒ³è¶‹åŠ¿
- **åˆæœŸ** (Epoch 0-50): å¿«é€Ÿå¢é•¿ï¼ˆæ¨¡å‹ä»"ä¸æ•¢é¢„æµ‹"åˆ°"æ•¢äºé¢„æµ‹"ï¼‰
- **ä¸­æœŸ** (Epoch 50-200): ç¨³å®šåœ¨åˆç†èŒƒå›´
- **åæœŸ**: æ³¢åŠ¨å¹…åº¦<10%

#### âš ï¸ å¼‚å¸¸æ¨¡å¼
| ç°è±¡ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|---------|---------|
| å¹…åº¦<0.1 | æ¨¡å‹è¿‡äºä¿å®ˆï¼ˆ"mode collapse"ï¼‰ | å¢åŠ noise scaleæˆ–é™ä½æ­£åˆ™åŒ– |
| å¹…åº¦>5.0 | æ¢¯åº¦çˆ†ç‚¸æˆ–æ•°æ®æœªå½’ä¸€åŒ– | æ£€æŸ¥`normalizer`é…ç½® |
| ä¸¤è€…ç›¸å·®>2å€ | Flowå’ŒCTå­¦ä¹ ä¸å¹³è¡¡ | è°ƒæ•´`consistency_batch_ratio` |

---

## 3. é—¨æ§åŠ¨æ€ç›‘æ§ (Gate Statistics)

### èƒŒæ™¯ï¼šGate-Attentionè®¾è®¡ç†å¿µ

**ä»£ç ä½ç½®**: `ditx_gateattn_block.py:419-424`

```python
self.modality_bias_config = {
    'tactile': 0.5,      # sigmoid(0.5) = 0.62 (é«˜åˆå§‹æƒé‡)
    'proprio': -0.5,     # sigmoid(-0.5) = 0.38 (ä½åˆå§‹æƒé‡)
    'head': 0.0,         # sigmoid(0.0) = 0.5 (ä¸­æ€§)
    'rgb_wrist': 0.0,
}
```

#### ğŸ¨ è®¾è®¡å“²å­¦
- **è§¦è§‰ä¼˜å…ˆ**: åˆå§‹åç½® +0.5 è®©æ¨¡å‹ä»"ä¿¡ä»»è§¦è§‰"å¼€å§‹è®­ç»ƒï¼ˆå¯¹äºæ¥è§¦å¯†é›†å‹ä»»åŠ¡ï¼‰
- **æœ¬ä½“æ„ŸçŸ¥æŠ‘åˆ¶**: åˆå§‹åç½® -0.5 é¿å…è¿‡åº¦ä¾èµ–å†å²å…³èŠ‚è§’åº¦ï¼ˆé˜²æ­¢è®°å¿†åŒ–ï¼‰
- **è§†è§‰ä¸­æ€§**: RGBç›¸æœºä¸æ–½åŠ å…ˆéªŒï¼Œè®©æ•°æ®é©±åŠ¨å…¶é‡è¦æ€§

---

### 3.1 å…¨å±€é—¨æ§æ¿€æ´» (`gate/mean_activation`)

**ä»£ç ä½ç½®**: `ditx_gateattn.py:690`

```python
global_stats['gate/mean_activation'] = np.mean(mean_activations)
```

#### ğŸ“Š ç‰©ç†æ„ä¹‰
- **å®šä¹‰**: æ‰€æœ‰å±‚ã€æ‰€æœ‰tokençš„å¹³å‡é—¨æ§å€¼ $\bar{g} = \frac{1}{L \cdot N} \sum_{l,n} \sigma(g_{l,n})$
- **ä½œç”¨**: åæ˜ Gateæœºåˆ¶çš„**æ•´ä½“å¼€åˆç¨‹åº¦**
  - æ¥è¿‘ 0.5: é—¨æ§åœ¨åŠ¨æ€è°ƒèŠ‚ï¼ˆç†æƒ³çŠ¶æ€ï¼‰
  - æ¥è¿‘ 0: å‡ ä¹å…³é—­æ‰€æœ‰cross-attentionï¼ˆå¼‚å¸¸ï¼‰
  - æ¥è¿‘ 1: é—¨æ§å¤±æ•ˆï¼ˆé€€åŒ–ä¸ºæ ‡å‡†attentionï¼‰

#### ğŸ¯ ç†æƒ³æ¼”å˜è½¨è¿¹
```
è®­ç»ƒåˆæœŸ (Epoch 0-20):
  - é¢„æœŸ: 0.50 Â± 0.05 (å—biaså½±å“ï¼Œç•¥åå‘è§¦è§‰çš„0.62)
  - è¯´æ˜: é—¨æ§å°šæœªå­¦ä¹ ï¼Œä¸»è¦ä¾èµ–åˆå§‹bias

è®­ç»ƒä¸­æœŸ (Epoch 20-100):
  - é¢„æœŸ: 0.45-0.55 æ³¢åŠ¨
  - è¯´æ˜: é—¨æ§å¼€å§‹æ ¹æ®ä»»åŠ¡åŠ¨æ€è°ƒæ•´

è®­ç»ƒåæœŸ (Epoch 100+):
  - é¢„æœŸ: ç¨³å®šåœ¨ 0.48-0.52
  - è¯´æ˜: é—¨æ§å·²å­¦ä¼šä»»åŠ¡ç›¸å…³çš„æ¨¡æ€é€‰æ‹©ç­–ç•¥
```

#### âš ï¸ å¼‚å¸¸æ¨¡å¼

| ç°è±¡ | è¯Šæ–­ | å¤„ç†æ–¹æ¡ˆ |
|------|------|---------|
| **æŒç»­ <0.3** | é—¨æ§è¿‡åº¦å…³é—­ï¼Œcross-attentionä¿¡æ¯æµæ–­è£‚ | 1. é™ä½gate dropout<br>2. æ£€æŸ¥æ˜¯å¦æ¢¯åº¦æ¶ˆå¤±<br>3. å°è¯•å‡å°biasç»å¯¹å€¼ |
| **æŒç»­ >0.8** | é—¨æ§é¥±å’Œï¼Œå¤±å»è°ƒåˆ¶èƒ½åŠ› | 1. å¢åŠ gateçš„L2æ­£åˆ™<br>2. æ£€æŸ¥å­¦ä¹ ç‡æ˜¯å¦è¿‡é«˜<br>3. éªŒè¯`qkv_bias=False`é…ç½® |
| **å‰§çƒˆéœ‡è¡ (Â±0.2)** | è®­ç»ƒä¸ç¨³å®š | 1. é™ä½å­¦ä¹ ç‡<br>2. å¢å¤§batch size<br>3. æ£€æŸ¥æ•°æ®åˆ†å¸ƒ |
| **å•è°ƒé€’å¢è‡³1.0** | è¿‡æ‹Ÿåˆï¼Œæ¨¡å‹"å·æ‡’"å…¨å¼€é—¨æ§ | 1. å¢åŠ dropout<br>2. æ•°æ®å¢å¼º<br>3. æå‰åœæ­¢ |

---

### 3.2 é—¨æ§é¥±å’Œåº¦ (`gate/saturation_high_ratio`, `gate/saturation_low_ratio`)

**ä»£ç ä½ç½®**: `ditx_gateattn_block.py:342-344`

```python
gate_high_saturation = (gate_activation > 0.9).float().mean().item()
gate_low_saturation = (gate_activation < 0.1).float().mean().item()
```

#### ğŸ“Š ç‰©ç†æ„ä¹‰
- **high_saturation**: æœ‰å¤šå°‘æ¯”ä¾‹çš„é—¨æ§å€¼ >0.9ï¼ˆæ¥è¿‘å®Œå…¨å¼€å¯ï¼‰
- **low_saturation**: æœ‰å¤šå°‘æ¯”ä¾‹çš„é—¨æ§å€¼ <0.1ï¼ˆæ¥è¿‘å®Œå…¨å…³é—­ï¼‰
- **å¥åº·æŒ‡æ ‡**: ä¸¤è€…ä¹‹å’Œ <0.15ï¼ˆå¤§éƒ¨åˆ†é—¨æ§åœ¨åŠ¨æ€è°ƒèŠ‚åŒºé—´ï¼‰

#### ğŸ¯ ç†æƒ³åˆ†å¸ƒ
```
è®­ç»ƒåˆæœŸ (Epoch 0-20):
  high: 0.05-0.10  (å°‘é‡tokenå®Œå…¨ä¿¡ä»»)
  low:  0.05-0.10  (å°‘é‡tokenå®Œå…¨å¿½ç•¥)

è®­ç»ƒåæœŸ (Epoch 100+):
  high: <0.05      (æå°‘é¥±å’Œ)
  low:  <0.05      (æå°‘å…³é—­)
```

#### âš ï¸ é¢„è­¦é˜ˆå€¼
| æŒ‡æ ‡ | é»„è‰²é¢„è­¦ | çº¢è‰²é¢„è­¦ | å«ä¹‰ |
|------|---------|---------|------|
| `high_saturation` | >0.15 | >0.30 | é—¨æ§ä¸§å¤±é€‰æ‹©æ€§ |
| `low_saturation` | >0.15 | >0.30 | å¤§é‡ä¿¡æ¯è¢«å±è”½ |
| `high + low` | >0.25 | >0.50 | é—¨æ§é€€åŒ–ä¸ºäºŒå€¼å¼€å…³ |

---

### 3.3 å±‚é—´å·®å¼‚ (`gate/layer_variance`, `gate/early_vs_late_diff`)

**ä»£ç ä½ç½®**: `ditx_gateattn.py:698, 707`

```python
global_stats['gate/layer_variance'] = np.var(mean_activations)
global_stats['gate/early_vs_late_diff'] = late_mean - early_mean
```

#### ğŸ“Š ç‰©ç†æ„ä¹‰
- **layer_variance**: ä¸åŒTransformerå±‚çš„é—¨æ§æ¿€æ´»æ–¹å·®
  - é«˜æ–¹å·®: å„å±‚æœ‰æ˜ç¡®çš„åŠŸèƒ½åˆ†å·¥ï¼ˆç†æƒ³ï¼‰
  - ä½æ–¹å·®: å„å±‚è¶‹åŒï¼ˆå¯èƒ½è¿‡åº¦æ­£åˆ™åŒ–ï¼‰
- **early_vs_late_diff**: æ—©æœŸå±‚ï¼ˆå‰1/3ï¼‰ä¸åæœŸå±‚ï¼ˆå1/3ï¼‰çš„é—¨æ§å·®å¼‚
  - æ­£å€¼: åæœŸå±‚é—¨æ§æ›´å¼€æ”¾ï¼ˆç¬¦åˆç‰¹å¾ç²¾ç‚¼çš„ç›´è§‰ï¼‰
  - è´Ÿå€¼: æ—©æœŸå±‚é—¨æ§æ›´å¼€æ”¾ï¼ˆå¯èƒ½å­˜åœ¨ä¿¡æ¯ç“¶é¢ˆï¼‰

#### ğŸ¯ ç†æƒ³æ¨¡å¼
```
Layer Variance:
  - è®­ç»ƒåˆæœŸ: 0.001-0.005 (å±‚é—´å·®å¼‚è¾ƒå°)
  - è®­ç»ƒåæœŸ: 0.005-0.015 (å±‚é—´åŠŸèƒ½åˆ†åŒ–)

Early vs Late:
  - é¢„æœŸ: +0.02 åˆ° +0.08
  - è§£é‡Š: æ—©æœŸå±‚ä¿å®ˆç­›é€‰ï¼ŒåæœŸå±‚å……åˆ†åˆ©ç”¨ç²¾ç‚¼ç‰¹å¾
```

---

### 3.4 æ¨¡æ€ç‰¹å®šé—¨æ§ (`gate/modality_tactile_mean`, ç­‰)

**ä»£ç ä½ç½®**: `ditx_gateattn.py:712-714`

```python
for modality, values in modality_stats.items():
    global_stats[f'gate/modality_{modality}_mean'] = np.mean(values)
```

#### ğŸ“Š ç‰©ç†æ„ä¹‰
å„æ¨¡æ€åœ¨æ‰€æœ‰å±‚çš„å¹³å‡é—¨æ§æ¿€æ´»å€¼ï¼Œ**ç›´æ¥åæ˜ æ¨¡å‹å¯¹è¯¥æ¨¡æ€çš„ä¿¡ä»»åº¦**ã€‚

#### ğŸ¯ é¢„æœŸæ¼”å˜ï¼ˆåŸºäºåˆå§‹biasï¼‰

| æ¨¡æ€ | åˆå§‹å€¼ | è®­ç»ƒåˆæœŸ | è®­ç»ƒä¸­æœŸ | è®­ç»ƒåæœŸ | è§£è¯» |
|------|-------|---------|---------|---------|------|
| **è§¦è§‰** (`tactile`) | 0.62 | 0.60-0.65 | 0.55-0.65 | **ä»»åŠ¡ç›¸å…³** | æ¥è§¦ä»»åŠ¡åº”ç»´æŒ>0.55 |
| **æœ¬ä½“æ„ŸçŸ¥** (`proprio`) | 0.38 | 0.35-0.42 | 0.40-0.50 | **ä»»åŠ¡ç›¸å…³** | åº”é€æ­¥å¢é•¿ï¼ˆå­¦ä¼šåˆ©ç”¨å†å²ï¼‰ |
| **å¤´éƒ¨ç›¸æœº** (`head`) | 0.50 | 0.48-0.52 | 0.50-0.60 | **ä»»åŠ¡ç›¸å…³** | è§†è§‰å¯†é›†å‹ä»»åŠ¡åº”>0.55 |
| **æ‰‹è…•ç›¸æœº** (`wrist`) | 0.50 | 0.48-0.52 | 0.45-0.55 | **ä»»åŠ¡ç›¸å…³** | ç²¾ç»†æ“ä½œä»»åŠ¡åº”>0.50 |

#### âš ï¸ ä»»åŠ¡ç‰¹å®šé¢„è­¦

**æ¥è§¦å¯†é›†å‹ä»»åŠ¡**ï¼ˆå¦‚æ’æ‹”ã€ç»„è£…ï¼‰:
```
âœ… æ­£å¸¸: tactile > 0.55, proprio > 0.40
âš ï¸ å¼‚å¸¸: tactile < 0.45 â†’ æ¨¡å‹å¿½ç•¥è§¦è§‰ï¼Œä¾èµ–è§†è§‰è¡¥å¿ï¼ˆå¯èƒ½å¯¼è‡´æ¥è§¦å¤±è´¥ï¼‰
```

**è§†è§‰å¯†é›†å‹ä»»åŠ¡**ï¼ˆå¦‚æ‹¾å–ã€å¯¼èˆªï¼‰:
```
âœ… æ­£å¸¸: head > 0.55, wrist > 0.50
âš ï¸ å¼‚å¸¸: head < 0.45 â†’ æ¨¡å‹è¿‡åº¦ä¾èµ–æœ¬ä½“æ„ŸçŸ¥ï¼ˆå¯èƒ½æ— æ³•æ³›åŒ–åˆ°æ–°åœºæ™¯ï¼‰
```

**åŠ¨æ€å¹³è¡¡æ£€æŸ¥**:
```python
# åœ¨WandBä¸­åˆ›å»ºè‡ªå®šä¹‰å›¾è¡¨
tactile_vs_proprio = gate/modality_tactile_mean - gate/modality_proprio_mean
# ç†æƒ³èŒƒå›´: 0.10 - 0.25 (è§¦è§‰ç•¥é«˜äºæœ¬ä½“æ„ŸçŸ¥)
```

---

## 4. æ³¨æ„åŠ›èšç„¦åº¦ç›‘æ§ (Attention Statistics)

### è®°å½•æœºåˆ¶è¯´æ˜

**ä»£ç ä½ç½®**: `train_maniflow_robotwin2_workspace.py:343-377`

```python
# æ¯500æ­¥è®°å½•ä¸€æ¬¡æ³¨æ„åŠ›æƒé‡ï¼ˆé¿å…æ€§èƒ½å¼€é”€ï¼‰
if self.global_step % 500 == 0:
    self.model.set_record_attn(True)
    # ... forward pass ...
    attn_stats = self.model.get_attn_stats(modality_info=modality_info)
    self.model.set_record_attn(False)
```

#### âš ï¸ é‡è¦æç¤º
- æ³¨æ„åŠ›ç»Ÿè®¡**æ¯500æ­¥æ›´æ–°ä¸€æ¬¡**ï¼ˆWandBæ›²çº¿ä¼šæœ‰é—´éš™ï¼‰
- ä¸æŸå¤±/é—¨æ§ï¼ˆæ¯æ­¥æ›´æ–°ï¼‰çš„æ—¶é—´å°ºåº¦ä¸åŒ
- è§‚å¯Ÿæ—¶åº”**å…³æ³¨è¶‹åŠ¿è€Œéç¬æ—¶å€¼**

---

### 4.1 å…¨å±€æ³¨æ„åŠ›ç†µ (`attn/entropy`)

**ä»£ç ä½ç½®**: `ditx_gateattn.py:772-776`

```python
attn_avg = all_weights.mean(dim=(0, 1, 2, 3))  # å¹³å‡åˆ°contextç»´åº¦
entropy = -torch.sum(attn_avg * torch.log(attn_avg + 1e-8))
entropy_normalized = (entropy / max_entropy).item()  # å½’ä¸€åŒ–åˆ°[0,1]
```

#### ğŸ“Š ç‰©ç†æ„ä¹‰
- **å®šä¹‰**: æ³¨æ„åŠ›åˆ†å¸ƒçš„Shannonç†µï¼Œå½’ä¸€åŒ–åèŒƒå›´[0, 1]
  - **0**: å®Œå…¨èšç„¦äºå•ä¸€tokenï¼ˆè¿‡æ‹Ÿåˆé£é™©ï¼‰
  - **1**: å‡åŒ€åˆ†å¸ƒäºæ‰€æœ‰tokenï¼ˆæ¬ æ‹Ÿåˆï¼‰
  - **0.5**: å…³æ³¨å°‘æ•°å…³é”®tokenï¼ˆç†æƒ³ï¼‰
  
#### ğŸ¯ ç†æƒ³æ¼”å˜è½¨è¿¹
```
è®­ç»ƒåˆæœŸ (Epoch 0-50):
  - é¢„æœŸ: 0.8-0.95 (é«˜ç†µï¼Œæ¨¡å‹æ¢ç´¢å„æ¨¡æ€)
  - è¯´æ˜: æ³¨æ„åŠ›å°šæœªèšç„¦

è®­ç»ƒä¸­æœŸ (Epoch 50-200):
  - é¢„æœŸ: 0.7-0.85 é€æ­¥ä¸‹é™
  - è¯´æ˜: æ³¨æ„åŠ›å¼€å§‹èšç„¦äºä»»åŠ¡ç›¸å…³token

è®­ç»ƒåæœŸ (Epoch 200+):
  - é¢„æœŸ: 0.5-0.7 ç¨³å®š
  - è¯´æ˜: æ³¨æ„åŠ›èšç„¦äºå…³é”®æ¨¡æ€ï¼Œä½†ä¿ç•™ä¸€å®šæ³›åŒ–èƒ½åŠ›
```

#### âš ï¸ å¼‚å¸¸æ¨¡å¼
| ç°è±¡ | è¯Šæ–­ | å¤„ç†æ–¹æ¡ˆ |
|------|------|---------|
| **æŒç»­ >0.85** | æ³¨æ„åŠ›è¿‡äºåˆ†æ•£ï¼Œæ¨¡å‹å­¦ä¹ ä¸åˆ°é‡ç‚¹ | 1. å¢åŠ è®­ç»ƒè½®æ•°<br>2. é™ä½`attn_drop`<br>3. æ£€æŸ¥æ•°æ®è´¨é‡ |
| **å¿«é€Ÿé™è‡³ <0.3** | æ³¨æ„åŠ›è¿‡åº¦èšç„¦ï¼Œè¿‡æ‹Ÿåˆé£é™© | 1. å¢åŠ dropout<br>2. æ•°æ®å¢å¼º<br>3. æ£€æŸ¥æ˜¯å¦æœ‰dominant modality |
| **éœ‡è¡ (Â±0.2)** | è®­ç»ƒä¸ç¨³å®šæˆ–batché—´å·®å¼‚å¤§ | 1. å¢å¤§batch size<br>2. æ£€æŸ¥æ•°æ®é‡‡æ ·ç­–ç•¥ |

---

### 4.2 å±‚é—´ç†µå˜åŒ– (`attn/entropy_early_late_diff`)

**ä»£ç ä½ç½®**: `ditx_gateattn.py:779-785`

```python
early_entropy = -torch.sum(early_attn * torch.log(early_attn + 1e-8))
late_entropy = -torch.sum(late_attn * torch.log(late_attn + 1e-8))
entropy_diff = ((early_entropy - late_entropy) / max_entropy).item()
```

#### ğŸ“Š ç‰©ç†æ„ä¹‰
- **æ­£å€¼**: æ—©æœŸå±‚ç†µ > åæœŸå±‚ç†µï¼ˆæ³¨æ„åŠ›é€å±‚èšç„¦ï¼Œç¬¦åˆç‰¹å¾ç²¾ç‚¼ç›´è§‰ï¼‰
- **è´Ÿå€¼**: åæœŸå±‚ç†µ > æ—©æœŸå±‚ç†µï¼ˆå¼‚å¸¸ï¼šåæœŸå±‚æ³¨æ„åŠ›å‘æ•£ï¼‰

#### ğŸ¯ ç†æƒ³æ¨¡å¼
```
è®­ç»ƒåˆæœŸ: 0.05-0.15 (æ—©æœŸå±‚ç•¥åˆ†æ•£)
è®­ç»ƒåæœŸ: 0.10-0.20 (æ˜ç¡®çš„å±‚æ¬¡åŒ–èšç„¦)
```

#### âš ï¸ é¢„è­¦
- `diff < 0`: åæœŸå±‚æ³¨æ„åŠ›å‘æ•£ â†’ æ£€æŸ¥åæœŸblockæ˜¯å¦æ¢¯åº¦æ¶ˆå¤±
- `diff > 0.30`: æ—©æœŸå±‚è¿‡åº¦åˆ†æ•£ â†’ å¯èƒ½å­˜åœ¨ä¿¡æ¯ç“¶é¢ˆ

---

### 4.3 æ¨¡æ€æ³¨æ„åŠ›å æ¯” (`attn/modality_xxx`)

**ä»£ç ä½ç½®**: `ditx_gateattn.py:798-836`

```python
# Tokenç»„ç»‡: [head tokens, rgb_wrist tokens, tactile tokens, proprio tokens]
head_attn = attn_avg[start_idx:start_idx + n_head].sum().item()
# ... å…¶ä»–æ¨¡æ€åŒç† ...
```

#### ğŸ“Š ç‰©ç†æ„ä¹‰
å„æ¨¡æ€çš„**å¹³å‡æ³¨æ„åŠ›æƒé‡**ï¼ˆè·¨æ‰€æœ‰å±‚ã€å¤´ã€åŠ¨ä½œtokenï¼‰ï¼Œå’Œä¸º1.0ã€‚

#### ğŸ¯ ä»»åŠ¡ç‰¹å®šåŸºå‡†

**ç²¾ç»†æ“ä½œä»»åŠ¡**ï¼ˆå¦‚è£…é…ã€æ’æ‹”ï¼‰:
```
RGB (head + wrist): 0.55-0.70
  â”œâ”€ head:         0.30-0.40 (å…¨å±€è§‚å¯Ÿ)
  â””â”€ wrist:        0.25-0.30 (å±€éƒ¨ç²¾ç»†)
Tactile:           0.20-0.30 (æ¥è§¦åé¦ˆ)
Proprio:           0.10-0.15 (å§¿æ€æ ¡æ­£)
```

**æ‹¾å–æŠ“æ¡ä»»åŠ¡**:
```
RGB:     0.70-0.80 (é«˜åº¦ä¾èµ–è§†è§‰)
Tactile: 0.10-0.15 (æ¥è§¦ç¡®è®¤)
Proprio: 0.10-0.15 (è¿åŠ¨è§„åˆ’)
```

**ç›²æ“ä½œä»»åŠ¡**ï¼ˆå¦‚æš—å…‰ç¯å¢ƒæ’æ‹”ï¼‰:
```
Tactile: 0.40-0.60 âš ï¸ åº”æ˜¾è‘—é«˜äºå…¶ä»–æ¨¡æ€
RGB:     0.20-0.30
Proprio: 0.20-0.30
```

#### âš ï¸ å¼‚å¸¸è¯Šæ–­è¡¨

| ç°è±¡ | å¯èƒ½åŸå›  | æ£€æŸ¥é¡¹ |
|------|---------|-------|
| `tactile < 0.05` | è§¦è§‰ä¿¡å·è¢«å¿½ç•¥ | 1. æ£€æŸ¥è§¦è§‰æ•°æ®æ˜¯å¦å…¨0<br>2. éªŒè¯`tactile_feature_dim`å¯¹é½<br>3. æŸ¥çœ‹`gate/modality_tactile_mean` |
| `proprio > 0.40` | è¿‡åº¦ä¾èµ–å†å²è½¨è¿¹ | 1. å¯èƒ½è®°å¿†åŒ–è®­ç»ƒæ•°æ®<br>2. æ£€æŸ¥æ•°æ®å¤šæ ·æ€§<br>3. å¢åŠ proprio dropout |
| `head + wrist < 0.3` | è§†è§‰ç‰¹å¾æå–å¤±è´¥ | 1. æ£€æŸ¥encoderæ˜¯å¦å†»ç»“<br>2. éªŒè¯å›¾åƒé¢„å¤„ç†<br>3. æŸ¥çœ‹`obs_encoder_lr` |
| æŸæ¨¡æ€å æ¯”>0.8 | Dominant modalityé—®é¢˜ | 1. å…¶ä»–æ¨¡æ€æ•°æ®è´¨é‡å·®<br>2. ç‰¹å¾ç»´åº¦ä¸åŒ¹é…<br>3. éœ€è¦æ¨¡æ€å¹³è¡¡ç­–ç•¥ |

---

### 4.4 æ³¨æ„åŠ›-é—¨æ§ç›¸å…³æ€§åˆ†æ

#### ğŸ”¬ é«˜çº§è¯Šæ–­æŠ€å·§

åœ¨WandBä¸­åˆ›å»ºè‡ªå®šä¹‰å›¾è¡¨ï¼Œè§‚å¯Ÿæ³¨æ„åŠ›ä¸é—¨æ§çš„è€¦åˆå…³ç³»ï¼š

```python
# ç†æƒ³æ¨¡å¼: æ³¨æ„åŠ›é«˜çš„æ¨¡æ€ï¼Œé—¨æ§ä¹Ÿåº”è¾ƒé«˜
tactile_coupling = attn/modality_tactile / gate/modality_tactile_mean
# æœŸæœ›: 0.8-1.2 (æ³¨æ„åŠ›ä¸é—¨æ§ååŒ)

# å¼‚å¸¸æ¨¡å¼:
# - coupling > 1.5: é—¨æ§æŠ‘åˆ¶ä½†æ³¨æ„åŠ›å¼ºè¡Œå…³æ³¨ï¼ˆå†²çªï¼‰
# - coupling < 0.5: é—¨æ§å¼€æ”¾ä½†æ³¨æ„åŠ›ä¸å…³æ³¨ï¼ˆæµªè´¹ï¼‰
```

---

## 5. æ¨¡æ€è´¡çŒ®åˆ†æ

### 5.1 æ¨¡æ€Dropå®éªŒï¼ˆå¯é€‰ï¼‰

**ä»£ç ä½ç½®**: `train_maniflow_robotwin2_workspace.py:179-206`

å¦‚æœå¯ç”¨äº†`modality_drop`é…ç½®ï¼Œå¯ä»¥é€šè¿‡æ¶ˆèå®éªŒè¯„ä¼°å„æ¨¡æ€çš„çœŸå®è´¡çŒ®ã€‚

#### é…ç½®ç¤ºä¾‹
```yaml
training:
  modality_drop:
    enabled: true
    head_drop: 0.1        # 10%æ¦‚ç‡ä¸¢å¼ƒå¤´éƒ¨ç›¸æœº
    rgb_wrist_drop: 0.1
    tactile_drop: 0.2     # è§¦è§‰æ›´é«˜ä¸¢å¼ƒç‡æµ‹è¯•é²æ£’æ€§
    proprio_drop: 0.1
```

#### ç›‘æ§æŒ‡æ ‡
- `drop/tactile_rate`: å®é™…ä¸¢å¼ƒæ¯”ä¾‹ï¼ˆåº”æ¥è¿‘é…ç½®å€¼ï¼‰
- è§‚å¯Ÿlosså˜åŒ–ï¼šè‹¥`tactile_drop=0.3`ålossé£™å‡ â†’ è§¦è§‰ç¡®å®å…³é”®

---

### 5.2 æ¨¡æ€é‡è¦æ€§æ’åºï¼ˆåŸºäºæ¢¯åº¦ï¼‰

#### ğŸ”¬ å®éªŒè®¾è®¡
1. **è®­ç»ƒåæœŸcheckpoint** (Epoch 200+)
2. **å†»ç»“éƒ¨åˆ†æ¨¡æ€**ï¼Œè§‚å¯ŸéªŒè¯é›†losså˜åŒ–

| å†»ç»“æ¨¡æ€ | Val Losså˜åŒ– | é‡è¦æ€§ç­‰çº§ |
|---------|-------------|-----------|
| è§¦è§‰ | +0.15 | â­â­â­ å…³é”® |
| æœ¬ä½“æ„ŸçŸ¥ | +0.08 | â­â­ é‡è¦ |
| æ‰‹è…•ç›¸æœº | +0.20 | â­â­â­ å…³é”® |
| å¤´éƒ¨ç›¸æœº | +0.05 | â­ è¾…åŠ© |

---

## 6. è®­ç»ƒé˜¶æ®µè¯Šæ–­æŒ‡å—

### é˜¶æ®µ1: å¿«é€Ÿæ‹ŸåˆæœŸ (Epoch 0-50)

#### âœ… å¥åº·æŒ‡æ ‡
```
loss_flow:               1.5 â†’ 0.6 (å¿«é€Ÿä¸‹é™)
loss_ct:                 1.2 â†’ 0.5
gate/mean_activation:    0.50 Â± 0.05
attn/entropy:            0.85 â†’ 0.75 (å¼€å§‹èšç„¦)
attn/modality_tactile:   0.15-0.20 (biaså¼•å¯¼æœ‰æ•ˆ)
```

#### âš ï¸ å¸¸è§é—®é¢˜
1. **Lossä¸ä¸‹é™** (`loss_flow > 1.2` @ Epoch 50)
   - æ£€æŸ¥å­¦ä¹ ç‡ï¼ˆå»ºè®®1e-4ï¼‰
   - éªŒè¯æ•°æ®å½’ä¸€åŒ–
   - ç¡®è®¤batch size â‰¥32

2. **é—¨æ§é¥±å’Œ** (`gate/saturation_high > 0.2`)
   - é™ä½åˆå§‹biasç»å¯¹å€¼ï¼ˆ0.5 â†’ 0.3ï¼‰
   - å¢åŠ gateçš„dropout

3. **æ³¨æ„åŠ›ä¸èšç„¦** (`attn/entropy > 0.9`)
   - æ­£å¸¸ç°è±¡ï¼Œéœ€ç­‰å¾…æ›´å¤šepoch
   - è‹¥æŒç»­è‡³Epoch 100ï¼Œæ£€æŸ¥`qk_norm`é…ç½®

---

### é˜¶æ®µ2: ç¨³å®šæ”¶æ•›æœŸ (Epoch 50-200)

#### âœ… å¥åº·æŒ‡æ ‡
```
loss_flow:               0.6 â†’ 0.3
loss_ct:                 0.5 â†’ 0.25
gate/mean_activation:    0.48-0.52 (ç¨³å®š)
gate/layer_variance:     0.005-0.015 (å±‚é—´åˆ†åŒ–)
attn/entropy:            0.75 â†’ 0.60
attn/modality_xxx:       æ ¹æ®ä»»åŠ¡è°ƒæ•´å®Œæ¯•
```

#### âš ï¸ å¸¸è§é—®é¢˜
1. **Losséœ‡è¡** (Â±0.1)
   - é™ä½å­¦ä¹ ç‡ï¼ˆä½¿ç”¨cosine schedulerï¼‰
   - æ£€æŸ¥æ˜¯å¦éœ€è¦å¢å¤§batch size

2. **é—¨æ§é€€åŒ–** (`gate/mean_activation â†’ 1.0`)
   - è¿‡æ‹Ÿåˆä¿¡å·ï¼Œå¢åŠ dropout
   - è€ƒè™‘æå‰åœæ­¢

3. **æ¨¡æ€å¤±è¡¡** (`attn/modality_tactile < 0.05`)
   - æ£€æŸ¥è§¦è§‰æ•°æ®è´¨é‡
   - æ‰‹åŠ¨è°ƒé«˜`tactile` bias (+0.5 â†’ +0.8)

---

### é˜¶æ®µ3: ç²¾ç»†è°ƒä¼˜æœŸ (Epoch 200+)

#### âœ… å¥åº·æŒ‡æ ‡
```
loss_flow:               0.25 Â± 0.02
loss_ct:                 0.22 Â± 0.02
gate/mean_activation:    0.50 Â± 0.02
attn/entropy:            0.55-0.65
validation loss:         ç¨³å®šä¸ä¸Šå‡
```

#### âš ï¸ è¿‡æ‹Ÿåˆé¢„è­¦
| æŒ‡æ ‡ | é˜ˆå€¼ | å«ä¹‰ |
|------|------|------|
| `train_loss / val_loss` | <0.7 | è®­ç»ƒé›†è¿‡åº¦æ‹Ÿåˆ |
| `attn/entropy` | <0.40 | æ³¨æ„åŠ›è¿‡åº¦èšç„¦ |
| `gate/saturation_high + low` | >0.30 | é—¨æ§äºŒå€¼åŒ– |

**å¤„ç†æ–¹æ¡ˆ**:
1. æå‰åœæ­¢ï¼ˆä½¿ç”¨Epoch 150-200çš„checkpointï¼‰
2. æ•°æ®å¢å¼ºï¼ˆå›¾åƒjitterã€åŠ¨ä½œå™ªå£°ï¼‰
3. å¢åŠ æ­£åˆ™åŒ–

---

## 7. å¼‚å¸¸æ¨¡å¼è¯†åˆ«

### 7.1 Checklist: è®­ç»ƒå¡ä½ä¸åŠ¨

#### ç—‡çŠ¶
```
Epoch 30-50: loss_flowåœåœ¨0.8-0.9ï¼Œä¸å†ä¸‹é™
```

#### æ’æŸ¥æ­¥éª¤
- [ ] å­¦ä¹ ç‡è¿‡ä½ï¼Ÿâ†’ æŸ¥çœ‹`lr`æ›²çº¿ï¼Œåº”åœ¨1e-4é‡çº§
- [ ] æ¢¯åº¦æ¶ˆå¤±ï¼Ÿâ†’ æ‰“å°`v_flow_pred_magnitude`ï¼Œåº”>0.3
- [ ] EMAæƒé‡æœªæ›´æ–°ï¼Ÿâ†’ éªŒè¯`ema.step()`è°ƒç”¨
- [ ] æ•°æ®é—®é¢˜ï¼Ÿâ†’ æ£€æŸ¥`train_action_mse_error`ï¼Œåº”<0.5

---

### 7.2 Checklist: é—¨æ§æœºåˆ¶å¤±æ•ˆ

#### ç—‡çŠ¶
```
gate/mean_activation â†’ 1.0 ä¸” gate/saturation_high > 0.5
```

#### åŸå› 
é—¨æ§å±‚å­¦ä¹ åˆ°"å…¨å¼€"æ˜¯æœ€ä¼˜ç­–ç•¥ï¼ˆé€€åŒ–ä¸ºæ ‡å‡†attentionï¼‰

#### æ’æŸ¥æ­¥éª¤
- [ ] æ£€æŸ¥`gate_type`é…ç½®ï¼ˆæ¨è`elementwise`è€Œé`headwise`ï¼‰
- [ ] å¢åŠ gateçš„L2æ­£åˆ™æˆ–dropout
- [ ] é™ä½å­¦ä¹ ç‡ï¼ˆç‰¹åˆ«æ˜¯AdaLN modulationéƒ¨åˆ†ï¼‰
- [ ] éªŒè¯æ˜¯å¦æ‰€æœ‰æ¨¡æ€ç‰¹å¾ç»´åº¦å¯¹é½

---

### 7.3 Checklist: è§¦è§‰ä¼ æ„Ÿå™¨è¢«å¿½ç•¥

#### ç—‡çŠ¶
```
attn/modality_tactile < 0.05 ä¸” gate/modality_tactile_mean < 0.3
```

#### æ’æŸ¥æ­¥éª¤
1. **æ•°æ®å®Œæ•´æ€§**
   ```python
   # åœ¨dataloaderä¸­åŠ å…¥æ–­è¨€
   assert batch['obs']['tactile'].abs().sum() > 0, "Tactile data is all zeros!"
   ```

2. **ç‰¹å¾ç»´åº¦å¯¹é½**
   ```python
   # æ£€æŸ¥encoderè¾“å‡º
   tactile_dim = obs_encoder.tactile_feature_dim
   rgb_dim = obs_encoder.rgb_feature_dim
   assert tactile_dim == rgb_dim, f"Dimension mismatch: {tactile_dim} vs {rgb_dim}"
   ```

3. **ä½ç½®ç¼–ç **
   - éªŒè¯`_initialize_vis_pos_embed`æ­£ç¡®åˆå§‹åŒ–è§¦è§‰tokenä½ç½®
   - è§¦è§‰tokenåº”ä½¿ç”¨1D Sin-Cosç¼–ç 

4. **Biaså¼ºåŒ–**
   ```python
   # åœ¨ditx_gateattn_block.pyä¸­æ‰‹åŠ¨è°ƒé«˜
   self.modality_bias_config['tactile'] = 1.0  # ä»0.5æé«˜
   ```

---

### 7.4 å¿«é€Ÿè¯Šæ–­è„šæœ¬ï¼ˆWandB Panelï¼‰

#### åˆ›å»ºè‡ªå®šä¹‰ç›‘æ§é¢æ¿

```python
# åœ¨WandBç•Œé¢åˆ›å»ºä»¥ä¸‹å›¾è¡¨

# 1. æŸå¤±ç»¼åˆè§†å›¾
panel_loss = wandb.plot.line_series(
    xs=[step] * 2,
    ys=[loss_flow, loss_ct],
    keys=["Flow Loss", "CT Loss"],
    title="Training Loss Convergence"
)

# 2. é—¨æ§å¥åº·åº¦
panel_gate_health = wandb.plot.line_series(
    xs=[step],
    ys=[1 - (gate/saturation_high_ratio + gate/saturation_low_ratio)],
    title="Gate Health Score (1 = healthy)",
    # é¢„è­¦çº¿: < 0.7
)

# 3. æ¨¡æ€ç«äº‰å…³ç³»
panel_modality = wandb.plot.bar(
    data=[
        ["RGB", attn/modality_rgb],
        ["Tactile", attn/modality_tactile],
        ["Proprio", attn/modality_proprio]
    ],
    title="Modality Attention Distribution"
)

# 4. æ³¨æ„åŠ›-é—¨æ§ååŒæ€§
panel_coupling = wandb.plot.scatter(
    x=gate/modality_tactile_mean,
    y=attn/modality_tactile,
    title="Tactile: Gate vs Attention Coupling"
    # ç†æƒ³: æ²¿y=xåˆ†å¸ƒ
)
```

---

## 8. é™„å½•ï¼šå‚æ•°é€ŸæŸ¥å¡ç‰‡

### æ‰“å°ç‰ˆå¿«é€Ÿå‚è€ƒï¼ˆè´´åœ¨æ˜¾ç¤ºå™¨æ—ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš¡ è®­ç»ƒç›‘æ§é€ŸæŸ¥å¡ v1.0                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”´ çº¢è‰²é¢„è­¦ (ç«‹å³å¹²é¢„)                          â”‚
â”‚  â–¡ loss_flow > 1.0 (100 epochå)               â”‚
â”‚  â–¡ gate/mean_activation < 0.3 æˆ– > 0.8         â”‚
â”‚  â–¡ gate/saturation_high > 0.3                  â”‚
â”‚  â–¡ attn/modality_tactile < 0.05 (æ¥è§¦ä»»åŠ¡)     â”‚
â”‚                                                 â”‚
â”‚ ğŸŸ¡ é»„è‰²é¢„è­¦ (å¯†åˆ‡è§‚å¯Ÿ)                          â”‚
â”‚  â–¡ loss_ct - loss_flow > 0.3                   â”‚
â”‚  â–¡ attn/entropy > 0.85 (50 epochå)            â”‚
â”‚  â–¡ val_loss / train_loss > 1.5                 â”‚
â”‚                                                 â”‚
â”‚ âœ… å¥åº·åŸºå‡† (è®­ç»ƒåæœŸ)                          â”‚
â”‚  â–¡ loss_flow: 0.2-0.3                          â”‚
â”‚  â–¡ gate/mean_activation: 0.48-0.52             â”‚
â”‚  â–¡ attn/entropy: 0.5-0.7                       â”‚
â”‚  â–¡ attn/modality_tactile: 0.15-0.30 (æ¥è§¦ä»»åŠ¡) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. ç‰ˆæœ¬å†å²

- **v1.0** (2026-02-08): åˆå§‹ç‰ˆæœ¬ï¼Œè¦†ç›–DiTXGateAttnæ ¸å¿ƒç›‘æ§æŒ‡æ ‡

---

## 10. å‚è€ƒæ–‡çŒ®

- **Gate-Attention**: Qwen3 Technical Report
- **Consistency Training**: Song et al., "Consistency Models" (2023)
- **Flow Matching**: Lipman et al., "Flow Matching for Generative Modeling" (2023)
- **ä»£ç å®ç°**: `ditx_gateattn.py`, `ditx_gateattn_block.py`

---

**ç»´æŠ¤è¯´æ˜**: æœ¬æ‰‹å†Œåº”éšä»£ç æ¼”è¿›åŒæ­¥æ›´æ–°ã€‚å¦‚æœ‰æ–°å¢ç›‘æ§æŒ‡æ ‡ï¼Œè¯·åœ¨å¯¹åº”ç« èŠ‚æ·»åŠ ã€‚
